<!-- Provider Status -->
<div class="p-4 border-b border-gray-200">
  <div id="provider-status-container" class="bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-sm font-medium text-gray-900">Active Provider</p>
        <p class="text-lg font-semibold text-gray-900">
          <%= @current_provider&.name || "None" %>
        </p>
        <div id="provider-usage" class="mt-2 space-y-1">
          <% if @connection_status[:usage] && !current_user.using_global_provider? %>
            <div class="flex justify-between text-xs">
              <span class="text-gray-600">Requests:</span>
              <span class="font-medium" id="requests-usage"><%= @connection_status[:usage][:requests][:used] %>/<%= @connection_status[:usage][:requests][:limit] %></span>
            </div>
            <div class="flex justify-between text-xs">
              <span class="text-gray-600">Tokens:</span>
              <span class="font-medium" id="tokens-usage"><%= @connection_status[:usage][:tokens][:used] %>/<%= @connection_status[:usage][:tokens][:limit] %></span>
            </div>
          <% end %>
        </div>
      </div>
      <div id="provider-status-indicator" class="w-3 h-3 rounded-full animate-pulse">
        <% if @connection_status[:status] == 'connected' %>
          <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
        <% elsif @connection_status[:status] == 'warning' %>
          <div class="w-3 h-3 bg-yellow-400 rounded-full animate-pulse"></div>
        <% else %>
          <div class="w-3 h-3 bg-red-400 rounded-full"></div>
        <% end %>
      </div>
    </div>
  </div>
</div>
